<html>

  <head>
    <link rel="stylesheet" href="wgan.css">
  </head>
  
  <body>
    <h1><a href="typo.html">TYPO</a> user reference manual</h1>
      (c) WGan 2021 <a href="https://en.wikipedia.org/wiki/MIT_License">[licence: MIT]</a>
    
    <ul>
      <li><a href="#how_to_start">How to start</a></li>
      <li><a href="#configuration">Configuring typo</a></li>
      <li><a href="#create_typo_script">Create typo script</a></li>
      <li><a href="#create_file_template">Create file template</a></li>
      <li><a href="#predefined_values_and_generators">Predefined values and generators</a></li>
      <li><a href="#your_own_module">Your own module</a></li>
    </ul>

    <h2><a name="how_to_start">How to start</a></h2>
      To start working with typo, you need to prepare template of files you want to create.
      You can also take ready template perapred for typo. 
    <p>
      Assuming that typo was taken from its repository 
      <a href="http://github.com/wojciech-gancza/typo">http://github.com/wojciech-gancza/typo</a>
      and you are in its main directory, type:
    <p class="example">
      ./typo/TYPO.py
    <p>
      Typo interpreter starts, and it awaits your orders. If you want to generate file, you 
      have to type the name of the template without <i>.template</i> suffix. As example:
    <p class="example">
      > simple_type
    <p>
      runs generation of output file based on <i>simple_type.template</i> file. Here
      the attempt of file generation return error because you did not provide any 
      informations needed by typo. First of all, you need to define where template
      is stored. Type:
    <p class="example">
      > template_path=_dev/templates
    <p>
      Similarelly you can set all vales which are needed by the template. At any time
      you can list all selected values by typing:
    <p class="example">
      > list
    <p>
      Some of elements in output file are generated by code written in python. Module 
      with such code need to be imported. You can do it by typing:
    <p class="example">
      > import typo_cpp
    <p>
      and now, all code generators from module typo_cpp.py is aviailable for 
      processing templates. 
    <p>
      During single session with typo, you can create as many files based on 
      various templates. When you wan to finish and exit typo command line 
      interpreter, just type:
    <p class="example">
      > exit
      
    <h2><a name="configuration">Configuring typo</a></h2>
      To operate with template files, type need to know some settings. They are stored
      in the same way as values used to locate in placeholders and could be 
      modified in the same way changing where typo searches for its data. Only 
      few values are needed to run code generators:
    <ul>
      <li><b>template_path</b> path to the directory where typo is looking for templates
      <li><b>path</b> path where the output files are located. Because you can 
        change this value during generation of files, it is recommended to point
        directly to the locations where the files are used in your project.</li>
      <li><b>file_name</b> name of the generated file.</li>
    </ul>
      Modules with code should be provided by you. Modules are imported by command 
    <p class="example">
      > import <i>module_name</i>

    <h2><a name="create_typo_script">Create typo script</a></h2>
      Interactive work is good when you develop templates, but for normal use is
      problematic. You can place list of typo commands in text file and then 
      interpret it byt running:
    <p class="example">
      TYPO.py <i>filename</i>
    <p>
      Typo interpreter will read specified file and process all commands located
      in the file line by line. When nou do not specifi the file - <i>init.typo</i> 
      will be executed - if exist. 
    <p>
      Notice that after executing all the commands - interactive mode is started.
      It is handy to configure typo. If you do not want to enter interactive 
      mode - end your script with <i>exit</i> command.
    
    <h2><a name="create_file_template">Create file template</a></h2>
      You can relay on templates given by third parties, but you can also prepare 
      templates you need to generate files for your project. 
    <p>
      When you thing about using typo in your project, you already know
      how the files should look like. You probably even have few examples
      you wrote. Just copy one of the file into directory you want to keep
      your templates and change the name into a form <i>*.template</i>.
    <p>
      Now, all places which should differ locate placeholders in a form
      <i>${name}</i>. When typo is creating file from a template, all placeholders
      are replaced by the code generated by apropriate generators written in
      Python, or by the values set in typo. When your template looks like:
    <p class="template">
      # This is exmaple.template file<br>
      # licence: {$licence}
    <p>
      And you type in typo:
    <p class="example">
      license = MIT<br>
      output_file = example.txt
    <p>
      You receive the file 'example.txt':
    <p class="output">
      # This is exmaple.template file<br>
      # licence: MIT
    <p>
      You can even place placeholders inside placeholders building more complex
      constructions like:
    <p class="example">
      This is ${example_${suffix}} file
    <p> 
      which will be replaced by value of <i>${example_cpp}</i> or <i>${exapme_h}</i>
      depending on value of <i>suffix</i> variable.
    <p>
      You can even place placeholders when setting values in typo, but here you 
      can use only values. Using generator names in values was not designed because 
      I see no use of it. If you think it could be handy - feel free to modify 
      typo code.
    <p>
      When accessing variable, you can convert its value using converter. 
      To convert value, add a dot after its name, and then name of converter.
      You can use one of built-in converter
    <p>
      <ul>
        <li>CAPITALIZE</li>
        <li>lowercase_with_underscore</li>
        <li>lowercaseCamel</li>
        <li>UppercaseCamel</li>
      </ul>
      (I think converter names are descriptive) or define uour own.
    <p class="example">
      id = some other class<br>
      identifier = ${id.lowercaseCamel}<br>
      # get_value("identifier") -> "someOtherClass"
    <p>
      Placeholders in values are replaced at the time when value is taken, not 
      when it is set. When you list values - you can see placeholders, not 
      calculated values.
    <p>
      When placeholder generate multiline content - it should be the only one 
      in line, and its indentation is use to set the indentation of output
      passed to generator. To find the indentation, typo is counting whitechars
      before placeholder. To make it properely work - do not use tabs.
    <p>
      You can also place typo commands (generally - assignmenst and imports) inside
      template. Linest starting with '<i>$></i>' are interpreted and typo commands and 
      send to interpreter at the time of generating output file.
    
    <h2><a name="predefined_values_and_generators">Predefined values and generators</a></h2>
      Typo has few built-in generators which you can use in your templates:
    <ul>
      <li><b>timestamp</b> - returns current time if format "%Y-%m-%d %H:%M:%S"</li>
      <li><b>typo_version</b> - returns current version of typo</li>
      <li><b>user_code</b> - this placeholder allo to place user code in 
        generated files. This placeholder must be only non-white characters
        in whole line. Line before and line after this placeholder must be costant.
        In mean that thiese lines cannot contain any placeholders. The content 
        of output file (if already exist) is read and stored from apropriate place
        in output file and then located back in the file when regenerating. Line before 
        <i>${user_code}</i>, and line after are used as user code delimiters and should 
        be unique in the result file. Typically comments can be used. Typo allow as 
        many user code blockas as you need.</li>
    </ul>
    
    <h2><a name="your_own_module">Your own module</a></h2>
      To use the full power of typo, you should know how to prepare your own
      code generator in python language. You can locate as many generators as 
      you want is single python module. When importing module - you will import all 
      of of them making them available for file generator.
    <p>
      Generator is a class having the same name as corresponding placeholder
      prefixed with <i>gen_</i>. So placeholder <i>${timestamp}</i> is replaced 
      by the code generated by class <i>gen_timestamp</i>
    <p>
      When building placeholder content, typo creates object of apropriate generator 
      class and calls method <i>generate</i> passing two parameters:
      <ul>
        <li><b>context</b> - repository with all values defined in typo. Values 
          can be retrived and set using methods
          <ul>
            <li><b>get_value(name)</b> - returns value stored under given name. 
              Name must be just a string. When value contain placeholders, they are 
              replaced by their values. If value is not found - function 
              returns <i>None</i></li>
            <li><b>get_not_interpreted_value(name)</b> - works as <i>get_value</i>
              but do not replace placeholders.</li>
            <li><b>set_value(name, value)</b> - in some cases you need to modify 
              variables stored in the condext. You can manipulate with 
              all the values - even with the configuration so be carrefull.</li>
          </ul></li>
        <li><b>output</b> - stream object where you should write generated code 
          It works as normal text output, but when you send new line character
          - created line will be placed in the output file with the indentation 
          of the placeholder located in template. You can also manipulate with
          indentation. 
          <ul>
            <li><b>write(text)</b> - wirtes text to output file</li>         
            <li><b>increase_indent()</b>increase indent by the indent 
              step - 4 characters. I see no reason to make this step configurable, 
              so it is constant. But feel free...</li>         
            <li><b>decrease_indent()</b> - decrease indent by the indent step</li>         
          </ul>
      </ul>
      When you want to report error - missing parameters or any of generation 
      problem which stops generation of output file - raise exception <i>typo_error</i>
      passing to its constructor an error message.
    <p>
      For full reference of avialable objects and their functionality - read 
      <a href="reference_manual.html">reference manual</a>
    <p>
      You can also create your own converters which can be called by adding suffix
      '<i>.coverter</i>' to the value name. Converter is a class with name 
      'conv_<i>converter_name</i>' having method:
    <p class+"example">
      def convert(selg, text):
          
  </body>
  
</html>